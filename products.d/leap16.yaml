id: Leap16
name: openSUSE Leap 16.0
archs: x86_64,aarch64
description: '[Experimental project] openSUSE Leap 16 is built on top of the next generation Adaptable Linux Platform (ALP) from SUSE.'
software:
  installation_repositories:
    - url: https://download.opensuse.org/repositories/openSUSE:/Leap:/16.0/images/repo/Leap-16.0-x86_64-Media1/
      archs: x86_64
    - url: https://download.opensuse.org/repositories/openSUSE:/Leap:/16.0/images/repo/Leap-16.0-aarch64-Media1/
      archs: aarch64
  mandatory_patterns:
    - alp_base
    - alp_base_zypper
    - alp_cockpit
    - alp-container_runtime
    - alp_defaults
  optional_patterns: null # no optional pattern shared
  mandatory_packages:
    - package: device-mapper # Apparently needed if devices at /dev/mapper are used at boot (eg. FDE)
    - package: fde-tools # Needed for FDE with TPM, hardcoded here temporarily
      archs: aarch64, x86_64
    - package: libtss2-tcti-device0
  optional_packages: null
  base_product: Leap16

security:
  tpm_luks_open: true
  lsm: selinux
  available_lsms:
    # apparmor:
    #   patterns:
    #     - apparmor
    selinux:
      patterns:
        - alp_selinux
      policy: enforcing
    none:
      patterns: null

storage:
  space_policy: delete
  encryption:
    method: luks2
    pbkd_function: pbkdf2
  volumes:
    - "/"
  volume_templates:
    - mount_path: "/"
      filesystem: btrfs
      btrfs:
        snapshots: true
        read_only: true
        default_subvolume: "@"
        subvolumes:
          - path: root
          - path: home
          - path: opt
          - path: srv
          - path: boot/writable
          - path: usr/local
          - path: boot/grub2/arm64-efi
            archs: aarch64
          - path: boot/grub2/i386-pc
            archs: x86_64
          - path: boot/grub2/powerpc-ieee1275
            archs: ppc,!board_powernv
          - path: boot/grub2/s390x-emu
            archs: s390
          - path: boot/grub2/x86_64-efi
            archs: x86_64
          - path: var
            copy_on_write: false
      size:
        auto: false
        min: 5 GiB
      outline:
        required: true
        filesystems:
          - btrfs
        snapshots_configurable: false
    - filesystem: xfs
      size:
        auto: false
      outline:
        required: false
        filesystems:
          - btrfs
          - ext2
          - ext3
          - ext4
          - xfs
